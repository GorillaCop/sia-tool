services:
  - type: web
    name: signal-integrity-assessment
    runtime: python
    plan: free
    region: oregon

    # Install Streamlit + PDF dependencies
    buildCommand: pip install -r streamlit_requirements.txt

    # Start Streamlit correctly on Render
    startCommand: streamlit run streamlit_app.py --server.address 0.0.0.0 --server.port $PORT --server.headless true

    healthCheckPath: /
    autoDeploy: true

    # REQUIRED for WeasyPrint PDF generation
    aptPackages:
      - libcairo2
      - libpango-1.0-0
      - libpangocairo-1.0-0
      - libgdk-pixbuf-2.0-0
      - shared-mime-info

    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      - key: SECRET_KEY
        generateValue: true
